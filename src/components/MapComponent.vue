<template>
  <div class="map-container">
    <gmap-map class="map" :center="center" :zoom="10">

      <gmap-marker
        :key="index"
        v-for="(m, index) in markers"
        :position="m.position"
        :clickable="true"
        :draggable="true"
        @click="center=m.position" />

      <!--Polyline for routes-->
      <gmap-polyline
        :draggable="false"
        :editable="false"
        :options="polylines.routeOptions" />

      <!--Polyline for track-->
      <gmap-polyline
        :draggable="false"
        :editable="false"
        :options="polylines.trackOptions" />

    </gmap-map>
  </div>
</template>
<script>
  import Vue from 'vue'
  import * as VueGoogleMaps from 'vue2-google-maps'
  // Vue Google Maps Plugin: https://www.npmjs.com/package/vue2-google-maps
  Vue.use(VueGoogleMaps, {
    load: {
      key: 'AIzaSyAcz63j0H3P3zD6UqKlghlRbHLXBWsQzjM',
      libraries: 'places', // This is required if you use the Autocomplete plugin
      // OR: libraries: 'places,drawing'
      // OR: libraries: 'places,drawing,visualization'
      // (as you require)
    }
  })
  export default {
    name: 'dwmc-map',
    components: {
      VueGoogleMaps
    },
    data() {
      let coordinates = {
        cdOffice : {lat: 42.2383894, lng: -83.7320719},
        kalamazoo : {lat: 42.2741366,lng: -85.6671881},
        provingGrounds : {lat: 42.271529470695356, lng: -84.05141830444336},
        provingGroundsLoop : [
          {lat: 42.26759161968885,  lng: -84.04515266418457},
          {lat: 42.27737228012331,  lng: -84.04317855834961},
          {lat: 42.27883289784298,  lng: -84.04317855834961},
          {lat: 42.28092850761039,  lng: -84.04360771179199},
          {lat: 42.28175403171639,  lng: -84.04412269592285},
          {lat: 42.28283354691986,  lng: -84.04515266418457},
          {lat: 42.28365904606614,  lng: -84.04609680175781},
          {lat: 42.28429403804946,  lng: -84.04772758483887},
          {lat: 42.28454803305081,  lng: -84.04927253723145},
          {lat: 42.28448453439648,  lng: -84.05098915100098},
          {lat: 42.28423053913913,  lng: -84.05253410339355},
          {lat: 42.28359554651579,  lng: -84.05390739440918},
          {lat: 42.28238904289957,  lng: -84.05553817749023},
          {lat: 42.28118251617961,  lng: -84.05648231506348},
          {lat: 42.279340930853145, lng: -84.0575122833252},
          {lat: 42.27622916437951,  lng: -84.05828475952148},
          {lat: 42.26378056190804,  lng: -84.06051635742188},
          {lat: 42.26193846806108,  lng: -84.06051635742188},
          {lat: 42.260668027153905, lng: -84.06017303466797},
          {lat: 42.25952460845128,  lng: -84.05965805053711},
          {lat: 42.258381169014406, lng: -84.05871391296387},
          {lat: 42.257491812895466, lng: -84.05759811401367},
          {lat: 42.256983603767466, lng: -84.056396484375},
          {lat: 42.25672949766761,  lng: -84.0549373626709},
          {lat: 42.256665970982645, lng: -84.05322074890137},
          {lat: 42.25685655084551,  lng: -84.05167579650879},
          {lat: 42.257491812895466, lng: -84.05021667480469},
          {lat: 42.25819059375912,  lng: -84.04910087585449},
          {lat: 42.25927051259046,  lng: -84.04781341552734},
          {lat: 42.260858594921864, lng: -84.04678344726562},
          {lat: 42.26320888337027,  lng: -84.04609680175781},
          {lat: 42.26759161968885,  lng: -84.04515266418457},
          {lat: 42.26759161968885,  lng: -84.04515266418457}
        ]
      };

      let lineSymbol = {
          path: "M -53.582954,-415.35856 C -67.309015,-415.84417 -79.137232,-411.40275 -86.431515,-395.45159 L -112.76807,-329.50717 C -131.95714,-324.21675 -140.31066,-310.27864 -140.75323,-298.84302 L -140.75323,-212.49705 L -115.44706,-212.49705 L -115.44706,-183.44029 C -116.67339,-155.74786 -71.290042,-154.67757 -70.275134,-183.7288 L -69.739335,-212.24976 L 94.421043,-212.24976 L 94.956841,-183.7288 C 95.971739,-154.67759 141.39631,-155.74786 140.16998,-183.44029 L 140.16998,-212.49705 L 165.43493,-212.49705 L 165.43493,-298.84302 C 164.99236,-310.27864 156.63886,-324.21677 137.44977,-329.50717 L 111.11322,-395.45159 C 103.81894,-411.40272 91.990714,-415.84414 78.264661,-415.35856 L -53.582954,-415.35856 z M -50.57424,-392.48409 C -49.426163,-392.49037 -48.215854,-392.45144 -46.988512,-392.40166 L 72.082372,-392.03072 C 82.980293,-392.28497 87.602258,-392.03039 92.236634,-381.7269 L 111.19565,-330.61998 L -86.30787,-330.86727 L -67.554927,-380.61409 C -64.630656,-390.57231 -58.610776,-392.44013 -50.57424,-392.48409 z M -92.036791,-305.02531 C -80.233147,-305.02529 -70.646071,-295.47944 -70.646071,-283.6758 C -70.646071,-271.87217 -80.233147,-262.28508 -92.036791,-262.28508 C -103.84043,-262.28508 -113.42751,-271.87216 -113.42751,-283.6758 C -113.42751,-295.47946 -103.84043,-305.02531 -92.036791,-305.02531 z M 117.91374,-305.02531 C 129.71738,-305.02533 139.26324,-295.47944 139.26324,-283.6758 C 139.26324,-271.87216 129.71738,-262.28508 117.91374,-262.28508 C 106.1101,-262.28507 96.523021,-271.87216 96.523021,-283.6758 C 96.523021,-295.47944 106.1101,-305.02531 117.91374,-305.02531 z M 103.2216,-333.14394 L 103.2216,-333.14394 z M 103.2216,-333.14394 C 103.11577,-333.93673 102.96963,-334.55679 102.80176,-335.21316 C 101.69663,-339.53416 100.2179,-342.16153 97.043938,-345.3793 C 93.958208,-348.50762 90.488134,-350.42644 86.42796,-351.28706 C 82.4419,-352.13197 45.472822,-352.13422 41.474993,-351.28706 C 33.885682,-349.67886 27.380491,-343.34759 25.371094,-335.633 C 25.286417,-335.3079 25.200722,-334.40363 25.131185,-333.2339 L 103.2216,-333.14394 z M 64.176391,-389.01277 C 58.091423,-389.00227 52.013792,-385.83757 48.882186,-379.47638 C 47.628229,-376.92924 47.532697,-376.52293 47.532697,-372.24912 C 47.532697,-368.02543 47.619523,-367.53023 48.822209,-364.99187 C 50.995125,-360.40581 54.081354,-357.67937 59.048334,-355.90531 C 60.598733,-355.35157 62.040853,-355.17797 64.86613,-355.27555 C 68.233081,-355.39187 68.925861,-355.58211 71.703539,-356.95492 C 75.281118,-358.72306 77.90719,-361.35074 79.680517,-364.96188 C 80.736152,-367.11156 80.820083,-367.68829 80.820085,-372.0392 C 80.820081,-376.56329 80.765213,-376.87662 79.470596,-379.50637 C 76.3443,-385.85678 70.261355,-389.02327 64.176391,-389.01277 z",
          strokeColor: '#393',
          fillColor: '#FF0000',
          fillOpacity: .6,
          strokeWeight: 0,
          scale: .1
      };

      return {
        center: coordinates.cdOffice,
        markers: [
          {position: coordinates.cdOffice},
          {position: coordinates.kalamazoo},
          {position: coordinates.provingGrounds}
        ],
        polylines: {
          trackOptions: {
            path: coordinates.provingGroundsLoop,
            strokeColor: "#FF0000",
            strokeOpacity: 1.0,
            strokeWeight: 2,
            icons: [{
              icon: lineSymbol,
              offset: '100%'
            }],
          },
          routeOptions: {
            path: [
              coordinates.cdOffice,
              coordinates.kalamazoo
            ],
            strokeColor: "#FF0000",
            strokeOpacity: 1.0,
            strokeWeight: 2,
            icons: [{
              icon: lineSymbol,
              offset: '100%'
            }]
          }
        }
      }
    }
  }
</script>
<style scoped>
  .map {
    height: 100vh;
    width: 65vw;
  }

  @media screen and (max-width: 53.125rem) {
    .map {
      height: 100vh;
      width: 100vw;
    }
  }
</style>
